import{d as R,bv as z,bz as F,bC as Q,a7 as k,r as o,au as I,o as l,b as r,f as e,e as S,u as q,a0 as C,S as w,aF as x,a as O,bD as E,N as m,bx as U}from"./index.6395c7ec.js";import{i as j,a as G,b as H}from"./propuestas.546bcd69.js";import{_ as J}from"./Pagination.ce0f40fc.js";const K={class:"row"},W={class:"col-md-12 mt-3"},X={class:"card"},Y={class:"card-body bg-light"},Z={class:"container-fluid"},ee={class:"row"},te=e("div",{class:"col-8 col-md-11 ps-0"},[e("h1",{class:"h6 ms-0"},"Propuestas")],-1),se={class:"col-2 col-md-1 text-nowrap text-end"},ae=e("i",{class:"bi-plus-lg"},null,-1),oe=[ae],ne=e("i",{class:"bi-search"},null,-1),le=[ne],ce={class:"table-responsive"},ie={class:"table"},re=e("th",{class:"text-end"},[e("i",{class:"bi-pencil-square"})],-1),ue=e("th",{class:"text-end"},[e("i",{class:"bi-trash"})],-1),de={class:"form-check form-switch"},_e=["onChange","value","checked"],he={class:"text-end"},ve=["onClick"],pe=e("i",{class:"bi-pencil-square"},null,-1),me=[pe],ye={class:"text-end"},be=["onClick"],fe=e("i",{class:"bi-trash"},null,-1),ge=[fe],we=R({setup(ke){const v=z(),y=U(),P=F(),a=Q(),L=k(()=>E(()=>import("./Search.3f229d16.js"),["assets/Search.3f229d16.js","assets/index.6395c7ec.js","assets/index.9f8a97de.css"])),M=k(()=>E(()=>import("./FormPropuestas.bdae6e42.js"),["assets/FormPropuestas.bdae6e42.js","assets/FormPropuestas.52172eed.css","assets/index.6395c7ec.js","assets/index.9f8a97de.css","assets/vee-validate-i18n.esm.f5e07155.js","assets/Modal.8abd9eab.js","assets/Modal.b76a14bf.css","assets/propuestas.546bcd69.js","assets/temas.8a9c7ffa.js","assets/regiones.c4ef40af.js","assets/multiselect.4188268a.js"])),i=o([]),c=o(!1),u=o("Propuestas"),d=o(""),p=o(Number),_=o(!1),b=o(""),N=o(["Nombre","Propuesta","Validada"]);I(async()=>{typeof a.query.query!="undefined"&&a.query.query!=null?(b.value=a.query.query.toString(),_.value=!0,T(a.query)):typeof a.query.page!="undefined"&&a.query.page!=null?h(a.query):(P.push({path:a.path,query:{page:1}}),h({page:1}))});const h=async(s={})=>{v.setLoading(),i.value=(await j(s)).data},T=async(s={})=>{v.setLoading(),i.value=(await G(s)).data},V=()=>{_.value=!_.value},$=()=>{d.value="store",u.value="Crear propuesta",c.value=!0},A=s=>{d.value="update",u.value="Editar propuesta",p.value=s,c.value=!0},D=s=>{d.value="delete",u.value="Eliminar propuesta",p.value=s,c.value=!0},B=(s,n,t)=>{v.setLoading(),H({},s,!n).then(()=>{y.success("La propuesta se ha actualizado.")}).catch(f=>{i.value[t].validar=n,y.error("Error al tratar de actualizar.")})};return(s,n)=>(l(),r("div",K,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[te,e("div",se,[e("button",{onClick:n[0]||(n[0]=t=>$()),class:"btn btn-success me-2"},oe),e("button",{onClick:V,class:"btn btn-info"},le)]),_.value?(l(),S(q(L),{key:0,lastQueryToSearch:b.value},null,8,["lastQueryToSearch"])):C("",!0)])])])]),e("div",ce,[e("table",ie,[e("thead",null,[e("tr",null,[(l(!0),r(w,null,x(N.value,t=>(l(),r("th",{key:t},m(t),1))),128)),re,ue])]),e("tbody",null,[(l(!0),r(w,null,x(i.value.data,(t,f)=>(l(),r("tr",{key:t},[e("td",null,m(t.nombre),1),e("td",null,m(t.propuesta),1),e("td",null,[e("div",de,[e("input",{onChange:g=>B(t.id,t.validada,f),value:t.validada,checked:t.validada,class:"form-check-input",type:"checkbox",role:"switch"},null,40,_e)])]),e("td",he,[e("button",{onClick:g=>A(t.id),class:"btn btn-info"},me,8,ve)]),e("td",ye,[e("button",{onClick:g=>D(t.id),class:"btn btn-danger"},ge,8,be)])]))),128))])])]),O(J,{links:i.value.links,onNavToPage:h},null,8,["links"]),c.value?(l(),S(q(M),{key:0,showModal:c.value,"onUpdate:showModal":n[1]||(n[1]=t=>c.value=t),onNavToPage:h,nameModal:u.value,typeSubmit:d.value,idElement:p.value},null,8,["showModal","nameModal","typeSubmit","idElement"])):C("",!0)])]))}});export{we as default};
