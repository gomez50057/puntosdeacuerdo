import{by as z,d as A,bv as D,bC as R,r as u,au as U,o as r,e as w,w as g,u as m,f as e,a as p,K,b as c,aF as x,N as E,S as C,b3 as O,bi as Q,m as j,a0 as q,aC as G,aA as H,bx as J}from"./index.6395c7ec.js";import{d as V,r as W,m as X,c as Y,l as Z,a as ee,F,E as T}from"./vee-validate-i18n.esm.f5e07155.js";import ae from"./Modal.8abd9eab.js";import{a as se,d as oe,b as te,u as le}from"./temas.8a9c7ffa.js";const M=l=>(G("data-v-2a8fd0be"),l=l(),H(),l),re={class:"mb-3"},ne=M(()=>e("label",{for:"nombre",class:"form-label"},"*Nombre",-1)),ie={class:"invalid-feedback"},de={class:"mb-3"},ue=M(()=>e("label",{for:"visible",class:"form-label"},"*Visible",-1)),me={class:"form-check form-switch"},ce={class:"invalid-feedback"},be=M(()=>e("p",{class:"m-0"},[e("small",{class:"m-0"},"Los campos con (*) son requeridos")],-1)),ve={class:"mb-3 mt-3 d-grid gap-2 col-12 mx-auto"},pe=["value"],fe={key:1},he=A({props:["showModal","nameModal","typeSubmit","idElement"],emits:["update:showModal","navToPage"],setup(l,{emit:b}){const s=l;V("required",W),V("min",X),Y({generateMessage:Z("es",{messages:{required:"El campo es requerido",min:"El campo debe tener al menos 0:{length} caracteres",email:"El campo debe ser un correo valido"}})});const f=D(),v=J(),h=R(),_=u(null),a=u({nombre:"",visible:0}),y=u(""),i=u({}),S=u(!1);U(async()=>{(s.typeSubmit=="update"||s.typeSubmit=="delete")&&await L(),_.value.showModal(),S.value=!0});const k=()=>{i.value.length!=0&&(y.value="is-invalid")},d=()=>{_.value.hideModal(),b("update:showModal",!1)},L=async()=>{f.setLoading();let t=await se(s.idElement);a.value=t.data},P=async()=>{f.setLoading(),await te(a.value).then(()=>{b("navToPage",h.query),d(),v.success(`Se ha creado el tema ${a.value.nombre} exitosamente.`)}).catch(t=>{t.response.status==422&&(i.value=t.response.data.errors,k())})},B=()=>{f.setLoading(),le(a.value,s.idElement).then(()=>{b("navToPage",h.query),d(),v.success(`El tema ${a.value.nombre} se ha actualizado.`)}).catch(t=>{t.response.status==422&&(i.value=t.response.data.errors,k())})},N=async()=>{oe(s.idElement).then(()=>{b("navToPage",h.query),d(),v.success(`El tema ${a.value.nombre} se ha eliminado.`)}).catch(()=>{v.error(`Error al eliminar el tema ${a.value.nombre}`)})},$=()=>{s.typeSubmit=="store"?P():s.typeSubmit=="update"&&B()};return(t,n)=>(r(),w(ae,{onCloseModal:d,idModal:"usersModal",nameModal:l.nameModal,ref_key:"modal",ref:_},{default:g(()=>[S.value&&(s.typeSubmit==="update"||s.typeSubmit==="store")?(r(),w(m(ee),{key:0,method:"POST",onSubmit:n[2]||(n[2]=o=>$())},{default:g(()=>[e("div",re,[ne,p(m(F),{id:"nombre",name:"nombre",modelValue:a.value.nombre,"onUpdate:modelValue":n[0]||(n[0]=o=>a.value.nombre=o),type:"text",class:K("form-control "+y.value),rules:"required"},null,8,["modelValue","class"]),p(m(T),{class:"alert-error",name:"nombre"}),e("div",ie,[(r(!0),c(C,null,x(i.value.nombre,o=>(r(),c("span",{key:o},E(o),1))),128))])]),e("div",de,[ue,p(m(F),{name:"visible",type:"checkbox",value:!0},{default:g(({field:o})=>[e("div",me,[O(e("input",j(o,{id:"visible",name:"visible","onUpdate:modelValue":n[1]||(n[1]=I=>a.value.visible=I),type:"checkbox",role:"switch",class:"form-check-input "+y.value,rules:"required"}),null,16),[[Q,a.value.visible]])])]),_:1}),p(m(T),{class:"alert-error",name:"visible"}),e("div",ce,[(r(!0),c(C,null,x(i.value.visible,o=>(r(),c("span",{key:o},E(o),1))),128))])]),be,e("div",ve,[e("input",{type:"submit",class:"btn btn-primary btn-lg",value:l.nameModal},null,8,pe)])]),_:1})):q("",!0),s.typeSubmit==="delete"?(r(),c("div",fe,[e("h5",null,"\xBFQuiere eliminar el tema: "+E(a.value.nombre)+"?",1),e("div",{class:"mb-3 mt-3 d-grid gap-2 col-12 mx-auto"},[e("button",{class:"btn btn-info",onClick:d},"Cancelar"),e("button",{class:"btn btn-danger",onClick:N},"Eliminar")])])):q("",!0)]),_:1},8,["nameModal"]))}});var Me=z(he,[["__scopeId","data-v-2a8fd0be"]]);export{Me as default};
